<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Configuraci√≥n Wordwall</title>
  <style>
    body { font-family: system-ui, sans-serif; background: #0b1020; color: #e7ecff; margin: 0; padding: 0; }
    .container { max-width: 500px; margin: 40px auto; background: #141a2a; border-radius: 16px; padding: 32px 24px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
    h1 { text-align: center; color: #6ae0a7; margin-bottom: 30px; }
    label { display: block; margin: 18px 0 8px 0; color: #9fb0ff; font-size: 1.1rem; }
    select { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #27304a; background: #232b45; color: #e7ecff; font-size: 1.1rem; margin-bottom: 18px; }
    .preview { display: flex; align-items: center; gap: 16px; margin-bottom: 18px; }
    .preview img { width: 48px; height: 48px; border-radius: 8px; background: #fff; border: 1px solid #27304a; }
    button { width: 100%; background: linear-gradient(180deg,#2aebad,#21c08d); color: #032217; font-weight: bold; font-size: 1.1rem; padding: 14px 0; border-radius: 12px; border: none; cursor: pointer; margin-top: 18px; }
    button:hover { background: linear-gradient(180deg,#21c08d,#2aebad); }
    .back-btn { background: #27304a; color: #e7ecff; margin-top: 10px; }
    .back-btn:hover { background: #2a3554; color: #6ae0a7; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Configuraci√≥n Wordwall</h1>
    <label for="templateSelect">Template:</label>
    <div class="preview" id="templatePreview"></div>
    <select id="templateSelect"></select>

    <label for="themeSelect">Theme:</label>
    <div class="preview" id="themePreview"></div>
    <select id="themeSelect"></select>

    <button id="saveBtn">Guardar configuraci√≥n</button>
  <button id="clearBtn" class="back-btn" type="button">üóëÔ∏è Borrar configuraci√≥n</button>
  <button class="back-btn" onclick="window.location.href='index.html'">‚¨ÖÔ∏è Volver al inicio</button>
  </div>
  <script>
    let templates = [];
    let themes = [];
    // Cargar config.json
    fetch('assets/config.json')
      .then(r => r.json())
      .then(cfg => {
        templates = cfg.templates || [];
        themes = cfg.themes || [];
        cargarTemplates();
        cargarThemes();
        cargarSeleccionGuardada();
      });

    function cargarTemplates() {
      const select = document.getElementById('templateSelect');
      select.innerHTML = '';
      templates.forEach(t => {
        const opt = document.createElement('option');
        opt.value = t.id;
        opt.textContent = t.name;
        select.appendChild(opt);
      });
      select.addEventListener('change', updateTemplatePreview);
      updateTemplatePreview();
    }
    function cargarThemes() {
      const select = document.getElementById('themeSelect');
      select.innerHTML = '';
      themes.forEach(t => {
        const opt = document.createElement('option');
        opt.value = t.id;
        opt.textContent = t.name;
        select.appendChild(opt);
      });
      select.addEventListener('change', updateThemePreview);
      updateThemePreview();
    }
    function updateTemplatePreview() {
      const select = document.getElementById('templateSelect');
      const preview = document.getElementById('templatePreview');
      const t = templates.find(t => String(t.id) === String(select.value));
      preview.innerHTML = t && t.src ? `<img src="${t.src}" alt=""> <span>${t.name}</span>` : '<span>Sin vista previa</span>';
    }
    function updateThemePreview() {
      const select = document.getElementById('themeSelect');
      const preview = document.getElementById('themePreview');
      const t = themes.find(t => String(t.id) === String(select.value));
      preview.innerHTML = t && t.src ? `<img src="${t.src}" alt=""> <span>${t.name}</span>` : '<span>Sin vista previa</span>';
    }
    function cargarSeleccionGuardada() {
      const tId = localStorage.getItem('wordwall_template');
      const thId = localStorage.getItem('wordwall_theme');
      if (tId) document.getElementById('templateSelect').value = tId;
      if (thId) document.getElementById('themeSelect').value = thId;
      updateTemplatePreview();
      updateThemePreview();
    }
    // Toast visual reutilizable
    function showToast(msg) {
      let toast = document.getElementById('toastMsg');
      if (!toast) {
        toast = document.createElement('div');
        toast.id = 'toastMsg';
        toast.style.position = 'fixed';
        toast.style.bottom = '32px';
        toast.style.left = '50%';
        toast.style.transform = 'translateX(-50%)';
        toast.style.background = '#232b45';
        toast.style.color = '#e7ecff';
        toast.style.padding = '16px 32px';
        toast.style.borderRadius = '10px';
        toast.style.fontSize = '1.1rem';
        toast.style.boxShadow = '0 4px 16px rgba(0,0,0,0.18)';
        toast.style.zIndex = 9999;
        toast.style.opacity = 0;
        toast.style.transition = 'opacity 0.3s';
        document.body.appendChild(toast);
      }
      toast.textContent = msg;
      toast.style.opacity = 1;
      setTimeout(() => { toast.style.opacity = 0; }, 1800);
    }

    document.getElementById('saveBtn').onclick = function() {
      const tId = document.getElementById('templateSelect').value;
      const thId = document.getElementById('themeSelect').value;
      localStorage.setItem('wordwall_template', tId);
      localStorage.setItem('wordwall_theme', thId);
      showToast('Configuraci√≥n guardada.');
    };

    document.getElementById('clearBtn').onclick = function() {
      localStorage.removeItem('wordwall_template');
      localStorage.removeItem('wordwall_theme');
      document.getElementById('templateSelect').selectedIndex = 0;
      document.getElementById('themeSelect').selectedIndex = 0;
      updateTemplatePreview();
      updateThemePreview();
      showToast('Configuraci√≥n borrada.');
    };
  </script>
</body>
</html>
